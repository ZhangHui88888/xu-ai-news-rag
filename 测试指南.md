# XU-News-AI-RAG æµ‹è¯•æŒ‡å—

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

### å¿…éœ€ç¯å¢ƒ
- **Java**: JDK 17 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Maven**: 3.6+ 
- **Node.js**: 18+
- **MySQL**: 8.0+
- **Docker & Docker Compose**ï¼ˆå¯é€‰ï¼Œæ¨èç”¨äºå¿«é€Ÿéƒ¨ç½²ï¼‰

### æ£€æŸ¥ç¯å¢ƒ
```bash
# æ£€æŸ¥ Java ç‰ˆæœ¬
java -version

# æ£€æŸ¥ Maven ç‰ˆæœ¬
mvn -version

# æ£€æŸ¥ Node ç‰ˆæœ¬
node -v

# æ£€æŸ¥ MySQL
mysql --version

# æ£€æŸ¥ Dockerï¼ˆå¯é€‰ï¼‰
docker --version
docker-compose --version
```

---

## ğŸ³ æ–¹å¼ä¸€ï¼šDocker Compose éƒ¨ç½²ï¼ˆæ¨èï¼‰

### 1. å¯åŠ¨æ‰€æœ‰æœåŠ¡

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹åç«¯æ—¥å¿—
docker-compose logs -f backend
```

### 2. ç­‰å¾…æœåŠ¡å¯åŠ¨

æœåŠ¡å¯åŠ¨é¡ºåºï¼š
1. âœ… MySQL (çº¦10ç§’)
2. âœ… Ollama (çº¦20ç§’)  
3. âœ… n8n (çº¦15ç§’)
4. âœ… åç«¯æœåŠ¡ (çº¦30ç§’)

### 3. è®¿é—®æœåŠ¡

- **åç«¯ API**: http://localhost:8080/api
- **API æ–‡æ¡£**: http://localhost:8080/api/docs (Swagger UI)
- **n8n å·¥ä½œæµ**: http://localhost:5678 (ç”¨æˆ·å: admin, å¯†ç : admin123)
- **Ollama API**: http://localhost:11434
- **MySQL**: localhost:3306 (root/xu_news_2025)

### 4. åˆå§‹åŒ– Ollama æ¨¡å‹

```bash
# ä¸‹è½½ Qwen2.5 æ¨¡å‹ï¼ˆå¤§çº¦ 2GBï¼‰
docker exec -it xu-news-ollama ollama pull qwen2.5:3b

# ä¸‹è½½åµŒå…¥æ¨¡å‹
docker exec -it xu-news-ollama ollama pull all-minilm-l6-v2

# éªŒè¯æ¨¡å‹
docker exec -it xu-news-ollama ollama list
```

### 5. åœæ­¢æœåŠ¡

```bash
# åœæ­¢æ‰€æœ‰æœåŠ¡
docker-compose down

# åœæ­¢å¹¶åˆ é™¤æ•°æ®å·ï¼ˆæ…ç”¨ï¼ï¼‰
docker-compose down -v
```

---

## ğŸ’» æ–¹å¼äºŒï¼šæœ¬åœ°å¼€å‘éƒ¨ç½²

### æ­¥éª¤ 1ï¼šå‡†å¤‡æ•°æ®åº“

```bash
# ç™»å½• MySQLï¼ˆå¯†ç ï¼š592802ï¼‰
mysql -u root -p592802

# åˆ›å»ºæ•°æ®åº“
CREATE DATABASE IF NOT EXISTS xu_news_rag DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

# é€€å‡º
exit

# å¯¼å…¥åˆå§‹åŒ–è„šæœ¬
mysql -u root -p592802 xu_news_rag < database/init.sql

# éªŒè¯æ•°æ®åº“
mysql -u root -p592802 -e "USE xu_news_rag; SHOW TABLES;"
```

### æ­¥éª¤ 2ï¼šå¯åŠ¨åç«¯æœåŠ¡

```bash
# è¿›å…¥åç«¯ç›®å½•
cd backend

# å®‰è£…ä¾èµ–å¹¶ç¼–è¯‘
mvn clean install -DskipTests

# å¯åŠ¨åç«¯ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
mvn spring-boot:run

# æˆ–è€…æŒ‡å®šé…ç½®æ–‡ä»¶
mvn spring-boot:run -Dspring-boot.run.profiles=dev
```

åç«¯åº”è¯¥åœ¨ http://localhost:8080 å¯åŠ¨æˆåŠŸã€‚

### æ­¥éª¤ 3ï¼šå¯åŠ¨å‰ç«¯æœåŠ¡

```bash
# æ‰“å¼€æ–°ç»ˆç«¯ï¼Œè¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

å‰ç«¯åº”è¯¥åœ¨ http://localhost:5173 å¯åŠ¨æˆåŠŸã€‚

### æ­¥éª¤ 4ï¼šå¯åŠ¨ Ollamaï¼ˆå¯é€‰ï¼‰

```bash
# å¦‚æœéœ€è¦ AI åŠŸèƒ½ï¼Œå¯åŠ¨ Ollama
# Windows: ä¸‹è½½å®‰è£… Ollama for Windows
# https://ollama.ai/download

# macOS/Linux:
curl -fsSL https://ollama.ai/install.sh | sh

# ä¸‹è½½æ¨¡å‹
ollama pull qwen2.5:3b
ollama pull all-minilm-l6-v2

# éªŒè¯
ollama list
```

### æ­¥éª¤ 5ï¼šå¯åŠ¨ n8nï¼ˆå¯é€‰ï¼‰

```bash
# ä½¿ç”¨ Docker å¯åŠ¨ n8n
docker run -d \
  --name xu-news-n8n \
  -p 5678:5678 \
  -e N8N_BASIC_AUTH_ACTIVE=true \
  -e N8N_BASIC_AUTH_USER=admin \
  -e N8N_BASIC_AUTH_PASSWORD=admin123 \
  -v n8n_data:/home/node/.n8n \
  n8nio/n8n

# è®¿é—® http://localhost:5678
```

---

## ğŸ§ª API æµ‹è¯•

### 1. æµ‹è¯•ç”¨æˆ·æ³¨å†Œ

```bash
curl -X POST http://localhost:8080/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "username": "testuser",
    "email": "test@example.com",
    "password": "Test123456",
    "fullName": "æµ‹è¯•ç”¨æˆ·"
  }'
```

**é¢„æœŸå“åº”ï¼š**
```json
{
  "code": 200,
  "message": "æ³¨å†ŒæˆåŠŸ",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "user": {
      "id": 1,
      "username": "testuser",
      "email": "test@example.com"
    }
  }
}
```

### 2. æµ‹è¯•ç”¨æˆ·ç™»å½•

```bash
curl -X POST http://localhost:8080/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "username": "testuser",
    "password": "Test123456"
  }'
```

**ä¿å­˜è¿”å›çš„ token**ï¼Œåç»­è¯·æ±‚éœ€è¦ä½¿ç”¨ã€‚

### 3. æµ‹è¯•çŸ¥è¯†åº“æŸ¥è¯¢ï¼ˆéœ€è¦ tokenï¼‰

```bash
# å°† YOUR_TOKEN æ›¿æ¢ä¸ºç™»å½•è¿”å›çš„ token
curl -X GET "http://localhost:8080/api/knowledge/list?page=1&size=10" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### 4. æµ‹è¯•æ–‡ä»¶ä¸Šä¼ 

```bash
# ä¸Šä¼ ä¸€ä¸ªæ–‡æ¡£æ–‡ä»¶
curl -X POST http://localhost:8080/api/knowledge/upload \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -F "file=@/path/to/your/document.pdf" \
  -F "tags=[\"æµ‹è¯•\",\"æ–‡æ¡£\"]"
```

### 5. æµ‹è¯• AI é—®ç­”ï¼ˆéœ€è¦ Ollamaï¼‰

```bash
curl -X POST http://localhost:8080/api/query/ask \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "question": "æœ€è¿‘æœ‰ä»€ä¹ˆç§‘æŠ€æ–°é—»ï¼Ÿ",
    "topK": 5
  }'
```

---

## ğŸŒ å‰ç«¯é¡µé¢æµ‹è¯•

1. **è®¿é—®é¦–é¡µ**: http://localhost:5173
2. **æ³¨å†Œè´¦å·**: ç‚¹å‡»"æ³¨å†Œ"æŒ‰é’®
3. **ç™»å½•ç³»ç»Ÿ**: ä½¿ç”¨æ³¨å†Œçš„è´¦å·ç™»å½•
4. **æµè§ˆçŸ¥è¯†åº“**: æŸ¥çœ‹æ–°é—»å’Œæ–‡æ¡£åˆ—è¡¨
5. **æ™ºèƒ½æœç´¢**: è¾“å…¥å…³é”®è¯æœç´¢
6. **AI é—®ç­”**: åœ¨èŠå¤©ç•Œé¢æé—®
7. **ä¸Šä¼ æ–‡æ¡£**: ä¸Šä¼  PDF/Word/TXT æ–‡ä»¶

---

## ğŸ” æ•…éšœæ’æŸ¥

### åç«¯å¯åŠ¨å¤±è´¥

**1. æ£€æŸ¥ç«¯å£å ç”¨**
```bash
# Windows
netstat -ano | findstr :8080

# macOS/Linux
lsof -i :8080
```

**2. æ£€æŸ¥æ•°æ®åº“è¿æ¥**
```bash
# æµ‹è¯•æ•°æ®åº“è¿æ¥
mysql -u root -p592802 -h localhost -P 3306 xu_news_rag -e "SELECT 1;"
```

**3. æŸ¥çœ‹åç«¯æ—¥å¿—**
```bash
# æ—¥å¿—æ–‡ä»¶ä½ç½®
tail -f backend/logs/xu-news-rag.log
```

### å‰ç«¯å¯åŠ¨å¤±è´¥

**1. æ¸…é™¤ç¼“å­˜é‡æ–°å®‰è£…**
```bash
cd frontend
rm -rf node_modules package-lock.json
npm install
```

**2. æ£€æŸ¥ç¯å¢ƒå˜é‡**
```bash
# æŸ¥çœ‹ vite.config.js ä¸­çš„ä»£ç†é…ç½®
cat vite.config.js
```

### Docker ç›¸å…³é—®é¢˜

**1. æŸ¥çœ‹å®¹å™¨æ—¥å¿—**
```bash
# æŸ¥çœ‹æ‰€æœ‰å®¹å™¨çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹ç‰¹å®šå®¹å™¨æ—¥å¿—
docker-compose logs backend
docker-compose logs mysql
docker-compose logs ollama
```

**2. é‡å¯å®¹å™¨**
```bash
# é‡å¯ç‰¹å®šæœåŠ¡
docker-compose restart backend

# é‡å¯æ‰€æœ‰æœåŠ¡
docker-compose restart
```

**3. è¿›å…¥å®¹å™¨è°ƒè¯•**
```bash
# è¿›å…¥åç«¯å®¹å™¨
docker exec -it xu-news-backend sh

# è¿›å…¥ MySQL å®¹å™¨
docker exec -it xu-news-mysql mysql -u root -pxu_news_2025
```

### æ•°æ®åº“é—®é¢˜

**1. æ£€æŸ¥æ•°æ®åº“æ˜¯å¦åˆ›å»º**
```bash
mysql -u root -p592802 -e "SHOW DATABASES LIKE 'xu_news_rag';"
```

**2. æ£€æŸ¥è¡¨ç»“æ„**
```bash
mysql -u root -p592802 xu_news_rag -e "SHOW TABLES;"
```

**3. é‡ç½®æ•°æ®åº“**
```bash
mysql -u root -p592802 -e "DROP DATABASE IF EXISTS xu_news_rag;"
mysql -u root -p592802 < database/init.sql
```

---

## ğŸ“Š æ€§èƒ½æµ‹è¯•ï¼ˆå¯é€‰ï¼‰

### ä½¿ç”¨ Apache Bench æµ‹è¯•

```bash
# å®‰è£… ab (Apache Bench)
# macOS: brew install httpd
# Ubuntu: apt-get install apache2-utils

# æµ‹è¯•ç™»å½•æ¥å£ - 100ä¸ªè¯·æ±‚ï¼Œ10ä¸ªå¹¶å‘
ab -n 100 -c 10 -p login.json -T application/json \
  http://localhost:8080/api/auth/login

# login.json å†…å®¹ï¼š
# {"username":"testuser","password":"Test123456"}
```

### ä½¿ç”¨ JMeter æµ‹è¯•

1. ä¸‹è½½ Apache JMeter
2. åˆ›å»ºæµ‹è¯•è®¡åˆ’
3. æ·»åŠ  HTTP è¯·æ±‚é‡‡æ ·å™¨
4. é…ç½®çº¿ç¨‹ç»„ï¼ˆç”¨æˆ·æ•°ã€å¾ªç¯æ¬¡æ•°ï¼‰
5. è¿è¡Œæµ‹è¯•å¹¶æŸ¥çœ‹ç»“æœ

---

## ğŸ“ æµ‹è¯•æ¸…å•

- [ ] åç«¯æœåŠ¡å¯åŠ¨æˆåŠŸï¼ˆç«¯å£ 8080ï¼‰
- [ ] å‰ç«¯æœåŠ¡å¯åŠ¨æˆåŠŸï¼ˆç«¯å£ 5173ï¼‰
- [ ] MySQL æ•°æ®åº“è¿æ¥æ­£å¸¸
- [ ] ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½æ­£å¸¸
- [ ] ç”¨æˆ·ç™»å½•åŠŸèƒ½æ­£å¸¸
- [ ] JWT Token éªŒè¯æ­£å¸¸
- [ ] çŸ¥è¯†åº“åˆ—è¡¨æŸ¥è¯¢æ­£å¸¸
- [ ] æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½æ­£å¸¸
- [ ] Ollama AI æ¨¡å‹åŠ è½½æˆåŠŸï¼ˆå¯é€‰ï¼‰
- [ ] AI é—®ç­”åŠŸèƒ½æ­£å¸¸ï¼ˆå¯é€‰ï¼‰
- [ ] n8n å·¥ä½œæµæ­£å¸¸ï¼ˆå¯é€‰ï¼‰
- [ ] å‰ç«¯é¡µé¢æ¸²æŸ“æ­£å¸¸
- [ ] å‰åç«¯æ¥å£è”è°ƒæ­£å¸¸

---

## ğŸ¯ ä¸‹ä¸€æ­¥

æµ‹è¯•é€šè¿‡åï¼Œæ‚¨å¯ä»¥ï¼š

1. **å¼€å‘æ–°åŠŸèƒ½**: åŸºäºç°æœ‰æ¶æ„æ‰©å±•
2. **å¯¼å…¥ n8n å·¥ä½œæµ**: ä½¿ç”¨ `n8n-workflows/rss-news-collector.json`
3. **è‡ªå®šä¹‰ AI æ¨¡å‹**: è®­ç»ƒæˆ–å¾®è°ƒ Ollama æ¨¡å‹
4. **éƒ¨ç½²åˆ°ç”Ÿäº§**: ä½¿ç”¨ Docker Compose æˆ– Kubernetes
5. **é…ç½® HTTPS**: æ·»åŠ  Nginx åå‘ä»£ç†å’Œ SSL è¯ä¹¦

---

## ğŸ†˜ è·å–å¸®åŠ©

- æŸ¥çœ‹é¡¹ç›®æ–‡æ¡£: `README.md`
- æŸ¥çœ‹ API æ–‡æ¡£: http://localhost:8080/api/docs
- æŸ¥çœ‹æŠ€æœ¯æ¶æ„: `æŠ€æœ¯æ¶æ„æ–‡æ¡£-XU-News-AI-RAG.md`

---

**ç¥æµ‹è¯•é¡ºåˆ©ï¼ğŸ‰**

